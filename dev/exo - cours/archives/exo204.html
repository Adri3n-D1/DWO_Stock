<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Exo 204</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<h1>Exo 204</h1>

<form action="/action_page.php" id="form1">
    <p class="titre">Formulaire d'inscription</p>
    <div class="mb-3 mt-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control" id="email" placeholder="Enter email" name="email">
    </div>
    <div class="mb-3">
        <label for="pwd" class="form-label">Password:</label>
        <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="pswd">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

  <div style="margin:20px;">
    <h2>Consigne</h2>
    <p>Créez un code qui va permettre de valider ce formulaire</p>
    <p>Vérifiez que l'email saisi a bien un format d'email</p>
    <p>Vérifiez que que le mot de passe fait au mois 6 caractères, qu'il a au moins une majuscule et qu'il a au moins un caractère spécial</p>
    <p>Lorsqu'on clique sur 'Submit', si l'email n'est pas conforme afficher dans une popup 'Email non conforme'</p>
    <p>Si le mot de passe n'est pas conforme afficher 'Mot de passe non conforme'</p>
    <p>Si tout est OK afficher 'Formulaire validé'</p>
    <p>La page ne doit pas s'actualiser lorsqu'on clique sur submit</p>
    <p>Vous devez créer vous-même la popup avec les messages d'erreur ou de succès</p>
  </div>

<style>

#form1{
    width: 50%;
    margin: 20px;
    padding: 20px;
    border: 1px solid #dbdbdb;
}
p.titre{
    font-size: 25px;
    font-weight: bold;
}
h1{
    text-align: center;
}

</style>
<script type="text/javascript">

function evalInput(idStr, regex) {
    let valueToCheck = document.getElementById(idStr).value;
    return regex.test(valueToCheck);
}

let evalEmail = /^[a-zA-Z]+(?:[\.]?[a-zA-Z0-9]+)*@[a-zA-Z0-9]+(?:[\.]?[a-zA-Z0-9]+)\.[a-zA-Z0-9]+$/g;
let evalPassowrd = /^(?=.*[A-Z])(?=.*[^a-zA-Z\s])^\S{6,}$/g;

document.getElementById('form1').onsubmit = function() {

    if (!evalInput('email', evalEmail)) {
        alert("Email non conforme");
        return false;
    }
    if (!evalInput('pwd', evalPassowrd)) {
        alert("Mot de passe non conforme");
        return false;
    }

    alert("Formulaire validé");
    return false;
}

</script>

</body>
</html>