<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exo-242</title>
</head>
<body>
</body>
<script type="text/javascript">

// Créez deux tableaux vides que vous stockerez dans les constantes 'promesses' et 'resultats'.

// Créez une boucle de 2000 itérations dans laquelle se feront de nouvelles instances de 'Promise' qui seront stockées dans 'promesses'.

// Chaque instance contiendra un timer aléatoire compris entre 50 et 200 ms.

// À la fin de ce timer, si le délai était compris entre 50 et 100 ms, on résout la promesse et le délai est stocké dans 'resultat'.
// Si le délai était supérieur à 100 ms, alors on rejete la promesse.
// Dans les deux cas, le délai sera passé en argument de fin de promesse.

// Une fois tous les promesses terminées, ajoutez une fonction vide au rejet et à la résolution.

let promesses = [];
let resultats = [];

function promise() {
    return new Promise((resolve, reject) => {        
        // const delay = Math.floor(Math.random() * (200 - 50) + 50);

        const delayRaw = Math.random() * (200 - 50) + 50;
        const delay = Math.floor(delayRaw);


        setTimeout(() => {
            if (delayInMs < 100) {
                resultats.push(delay);
                resolve(delay);
            }
            else {
                reject(delay);
            }
        }, delay);
    });
}

for (let i = 0; i < 2000; i++) {
    promesses.push(promise());
}

Promise.all(promesses)
.then(() => {})
.catch(() => {});

</script>
</html>